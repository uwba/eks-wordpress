jQuery(document).ready(function(e){var c,a={};if(!e('input[name="_soliloquy_settings[type]"]').is(":checked")){e("#soliloquy-default-slider").attr("checked","checked")}if("default"==e('input[name="_soliloquy_settings[type]"]:checked').val()){e(".soliloquy-upload-text, #soliloquy-upload, #soliloquy-images").show();e("#soliloquy-upload").css("display","inline-block")}else{e(".soliloquy-upload-text, #soliloquy-upload, #soliloquy-images").hide()}e('input[name="_soliloquy_settings[type]"]').on("change",function(){if("default"==e(this).val()){e(".soliloquy-upload-text, #soliloquy-upload, #soliloquy-images").fadeIn();e("#soliloquy-upload").css("display","inline-block")}else{e(".soliloquy-upload-text, #soliloquy-upload, #soliloquy-images").hide()}});e(".soliloquy-image-meta").hide();if(e("#soliloquy-advanced").is(":checked")){e("#soliloquy-navigation-box, #soliloquy-control-box, #soliloquy-keyboard-box, #soliloquy-multi-keyboard-box, #soliloquy-mousewheel-box, #soliloquy-pauseplay-box, #soliloquy-random-box, #soliloquy-number-box, #soliloquy-control-box, #soliloquy-loop-box, #soliloquy-action-box, #soliloquy-hover-box, #soliloquy-slider-css-box, #soliloquy-reverse-box, #soliloquy-smooth-box, #soliloquy-touch-box, #soliloquy-delay-box, .soliloquy-advanced").show()}else{e("#soliloquy-navigation-box, #soliloquy-control-box, #soliloquy-keyboard-box, #soliloquy-multi-keyboard-box, #soliloquy-mousewheel-box, #soliloquy-pauseplay-box, #soliloquy-random-box, #soliloquy-number-box, #soliloquy-control-box, #soliloquy-loop-box, #soliloquy-action-box, #soliloquy-hover-box, #soliloquy-slider-css-box, #soliloquy-reverse-box, #soliloquy-smooth-box, #soliloquy-touch-box, #soliloquy-delay-box, .soliloquy-advanced").hide()}if(0==e("#soliloquy-width").val().length){e("#soliloquy-width").val(soliloquy.width)}if(0==e("#soliloquy-height").val().length){e("#soliloquy-height").val(soliloquy.height)}if("custom"!==e("#soliloquy-default-size option[selected]").val()){e("#soliloquy-custom-sizes").hide()}else{e("#soliloquy-default-sizes").hide()}if(0==e("#soliloquy-speed").val().length){e("#soliloquy-speed").val(soliloquy.speed)}if(0==e("#soliloquy-duration").val().length){e("#soliloquy-duration").val(soliloquy.duration)}e("#soliloquy-default-size").on("change",function(){if("default"!==e(this).val()){e("#soliloquy-default-sizes").hide();e("#soliloquy-custom-sizes").fadeIn("normal")}else{e("#soliloquy-custom-sizes").hide();e("#soliloquy-default-sizes").fadeIn("normal")}});e("#soliloquy-advanced").on("change",function(){if(e(this).is(":checked")){e("#soliloquy-navigation-box, #soliloquy-control-box, #soliloquy-keyboard-box, #soliloquy-multi-keyboard-box, #soliloquy-mousewheel-box, #soliloquy-pauseplay-box, #soliloquy-random-box, #soliloquy-number-box, #soliloquy-control-box, #soliloquy-loop-box, #soliloquy-action-box, #soliloquy-hover-box, #soliloquy-slider-css-box, #soliloquy-reverse-box, #soliloquy-smooth-box, #soliloquy-touch-box, #soliloquy-delay-box, .soliloquy-advanced").fadeIn("normal")}else{e("#soliloquy-navigation-box, #soliloquy-control-box, #soliloquy-keyboard-box, #soliloquy-multi-keyboard-box, #soliloquy-mousewheel-box, #soliloquy-pauseplay-box, #soliloquy-random-box, #soliloquy-number-box, #soliloquy-control-box, #soliloquy-loop-box, #soliloquy-action-box, #soliloquy-hover-box, #soliloquy-slider-css-box, #soliloquy-reverse-box, #soliloquy-smooth-box, #soliloquy-touch-box, #soliloquy-delay-box, .soliloquy-advanced").fadeOut("normal")}});e(".soliloquy-size-more").on("click.soliloquySizeExplain",function(j){j.preventDefault();e("#soliloquy-explain-size").fadeToggle()});e("#soliloquy-area").on("click.soliloquyRemove",".remove-image",function(k){k.preventDefault();var n=confirm(soliloquy.delete_nag);if(!n){return}var m=e(this).parent().attr("data-full-delete"),l=(typeof m!=="undefined"&&m!==false)?true:false;c=e(this).parent().attr("id");e("#soliloquy-upload").after('<span class="soliloquy-waiting"><img class="soliloquy-spinner" src="'+soliloquy.spinner+'" width="16px" height="16px" style="margin: -1px 5px 0; vertical-align: middle;" />'+soliloquy.removing+"</span>");var j={action:"soliloquy_remove_images",attachment_id:c,do_delete:l?true:false,nonce:soliloquy.removenonce};e.post(soliloquy.ajaxurl,j,function(o){e("#"+c).fadeOut("normal",function(){e(this).remove();e(".soliloquy-waiting").fadeOut("normal",function(){e(this).remove();e(".soliloquy-load-library").attr("data-soliloquy-offset",0).addClass("has-search").trigger("click")})})},"json")});e("#soliloquy-area").on("click.soliloquyModify",".modify-image",function(m){m.preventDefault();var k=e(this).parent().attr("id"),j="meta-"+k;e("#"+j).appendTo("body").show();e.each(a,function(){this.refresh()});var l=function(n){n.preventDefault();e("#"+j).appendTo("#"+k).hide()};e(document).on("click.soliloquyIframe",".media-modal-close, .media-modal-backdrop",l);e(document).on("keydown.soliloquyIframe",function(n){if(27==n.keyCode){l(n)}})});e(document).on("click.soliloquyMeta",".soliloquy-meta-submit",function(o){o.preventDefault();var m=e(this).parent().parent().parent().prev().find(".soliloquy-meta-table").attr("id");var j=e(this).parent().parent().parent().prev().find(".soliloquy-meta-table").attr("data-attachment-id");var q=e(this).text();var l=e(this);var k=e(this).parent().parent().parent().prev().find(".soliloquy-meta-table").attr("data-slide-type");var p=false;l.text(soliloquy.saving);if("video"==k){p=e("#meta-"+j).find(".soliloquy-video-title").val()}if("html"==k){p=e("#meta-"+j).find(".soliloquy-html-title").val()}var n={action:"soliloquy_update_meta",attach:j,id:soliloquy.id,type:k,nonce:soliloquy.metanonce};e("#"+m+" td").each(function(){var r=e(this).find("*");e.each(r,function(){var s=e(this).attr("class");var t=e(this).val();if("checkbox"==e(this).attr("type")){var t=e(this).is(":checked")?"true":"false"}if("radio"==e(this).attr("type")){if(!e(this).is(":checked")){return}var t=e(this).val()}n[s]=t})});e.post(soliloquy.ajaxurl,n,function(r){l.text(soliloquy.saved);if(p){e("#"+j).find("h4").text(p)}setTimeout(function(){e("#meta-"+j).hide().appendTo("#"+j);l.text(q)},500)},"json")});e("#soliloquy-area").on("click.soliloquyUpload","#soliloquy-upload",function(l){l.preventDefault();var j=true;e("#soliloquy-upload-ui").appendTo("body").show();var k=function(m){m.preventDefault();e("#soliloquy-upload-ui").appendTo("#soliloquy-upload-ui-wrapper").hide();b();j=false};e(document).on("click.soliloquyIframe","#soliloquy-upload-ui .media-modal-close, #soliloquy-upload-ui .media-modal-backdrop",k);e(document).on("keydown.soliloquyIframe",function(m){if(27==m.keyCode&&j){k(m)}})});e(".soliloquy-media-frame .media-menu-item").on("click",function(m){m.preventDefault();var l=e(this),j=l.parent().find(".active").removeClass("active").data("soliloquy-content"),k=l.addClass("active").data("soliloquy-content");e("#"+j).hide();e("#"+k).show();if("soliloquy-html-slides"==k){e.each(a,function(){this.refresh()})}});e(".soliloquy-gallery").on("click",".thumbnail, .check, .media-modal-icon",function(j){j.preventDefault();if(e(this).parent().parent().hasClass("soliloquy-in-slider")){return}if(e(this).parent().parent().hasClass("selected")){e(this).parent().parent().removeClass("details selected")}else{e(this).parent().parent().addClass("details selected")}});e(".soliloquy-load-library").on("click",function(l){l.preventDefault();var k=e(this);k.after('<span class="soliloquy-waiting" style="display: inline-block; margin-top: 16px;"><img class="soliloquy-spinner" src="'+soliloquy.spinner+'" width="16px" height="16px" style="margin: -1px 5px 0; vertical-align: middle;" />'+soliloquy.loading+"</span>");var j={action:"soliloquy_load_library",offset:parseInt(k.attr("data-soliloquy-offset")),post_id:soliloquy.id,nonce:soliloquy.loadnonce};e.post(soliloquy.ajaxurl,j,function(m){k.attr("data-soliloquy-offset",parseInt(k.attr("data-soliloquy-offset"))+20);if(m&&m.html&&k.hasClass("has-search")){e(".soliloquy-gallery").html(m.html);k.removeClass("has-search")}else{e(".soliloquy-gallery").append(m.html)}e(".soliloquy-waiting").fadeOut("normal",function(){e(this).remove()})},"json")});e(".soliloquy-html").find(".soliloquy-html-code").each(function(j,k){var l=e(k).attr("id");a[l]=CodeMirror.fromTextArea(k,{enterMode:"keep",indentUnit:4,electricChars:false,lineNumbers:true,lineWrapping:true,matchBrackets:true,mode:"php",smartIndent:false,tabMode:"shift",theme:"eclipse"});a[l].on("blur",function(m){e("#"+l).text(m.getValue())});a[l].refresh()});e(".soliloquy-add-html-slide").on("click",function(k){k.preventDefault();var j=parseInt(e(this).attr("data-soliloquy-html-number")),l="soliloquy-html-slide-"+e(this).attr("data-soliloquy-html-number");e(this).attr("data-soliloquy-html-number",j+1).parent().before(h(j));a[l]=CodeMirror.fromTextArea(document.getElementById(l),{enterMode:"keep",indentUnit:4,electricChars:false,lineNumbers:true,lineWrapping:true,matchBrackets:true,mode:"php",smartIndent:false,tabMode:"shift",theme:"eclipse"});a[l].on("blur",function(m){e("#"+l).text(m.getValue())});a[l].refresh()});function h(k){var j="";j+='<div class="soliloquy-html-slide-holder"><p class="no-margin-top"><a href="#" class="button button-secondary soliloquy-delete-html-slide" title="'+soliloquy.htmlremove+'">'+soliloquy.htmlremove+'</a><label for="soliloquy-html-slide-'+k+'-title"><strong>'+soliloquy.htmlslide+'</strong></label><br /><input type="text" class="soliloquy-html-slide-title" id="soliloquy-html-slide-'+k+'-title" value="" placeholder="'+soliloquy.htmlplace+'" /></p><textarea class="soliloquy-html-slide-code" id="soliloquy-html-slide-'+k+'">'+soliloquy.htmlstart+"</textarea></div>";return j}e("#soliloquy-html-slides").on("click",".soliloquy-delete-html-slide",function(j){j.preventDefault();e(this).parent().parent().remove()});e(".soliloquy-add-video-slide").on("click",function(k){k.preventDefault();var j=parseInt(e(this).attr("data-soliloquy-video-number")),l="soliloquy-video-slide-"+e(this).attr("data-soliloquy-html-number");e(this).attr("data-soliloquy-video-number",j+1).parent().before(d(j))});function d(k){var j="";j+='<div class="soliloquy-video-slide-holder"><p class="no-margin-top"><a href="#" class="button button-secondary soliloquy-delete-video-slide" title="'+soliloquy.htmlremove+'">'+soliloquy.htmlremove+'</a><label for="soliloquy-video-slide-'+k+'-title"><strong>'+soliloquy.videoslide+'</strong></label><br /><input type="text" class="soliloquy-video-slide-title" id="soliloquy-video-slide-'+k+'-title" value="" placeholder="'+soliloquy.videoplace+'" /></p><p><label for="soliloquy-video-slide-'+k+'"><strong>'+soliloquy.videotitle+'</strong></label><br /><input type="text" class="soliloquy-video-slide-url" id="soliloquy-video-slide-'+k+'" value="" placeholder="'+soliloquy.videooutput+'" /></p><p class="no-margin-bottom"><label for="soliloquy-video-slide-'+k+'-caption"><strong>'+soliloquy.videocaption+'</strong></label><br /><textarea class="soliloquy-video-slide-caption" id="soliloquy-video-slide-'+k+'-caption"></textarea></p></div>';return j}e("#soliloquy-video-slides").on("click",".soliloquy-delete-video-slide",function(j){j.preventDefault();e(this).parent().parent().remove()});e(document).on("click",".soliloquy-media-insert",function(p){p.preventDefault();var o=e(this),q=e(this).text(),m={action:"soliloquy_insert_slides",nonce:soliloquy.insertnonce,post_id:soliloquy.id,data:{selected:{},video:{},html:{}}},k=false,l=false,j=false;o.text(soliloquy.inserting);var n=function(){e("#soliloquy-upload-ui").appendTo("#soliloquy-upload-ui-wrapper").hide();b();main_frame=false};e(".soliloquy-media-frame").find(".attachment.selected:not(.soliloquy-in-slider)").each(function(r,s){m.data.selected[r]=e(s).attr("data-attachment-id");k=true});e(".soliloquy-media-frame").find(".soliloquy-video-slide-holder").each(function(r,s){m.data.video[r]={title:e(s).find(".soliloquy-video-slide-title").val(),url:e(s).find(".soliloquy-video-slide-url").val(),caption:e(s).find(".soliloquy-video-slide-caption").val()};l=true});e(".soliloquy-media-frame").find(".soliloquy-html-slide-holder").each(function(r,s){m.data.html[r]={title:e(s).find(".soliloquy-html-slide-title").val(),code:e(s).find(".soliloquy-html-slide-code").val()};j=true});e.post(soliloquy.ajaxurl,m,function(r){o.text(soliloquy.inserted);setTimeout(function(){n();o.text(q);if(k){e(".soliloquy-load-library").attr("data-soliloquy-offset",0).addClass("has-search").trigger("click")}if(l){e("#soliloquy-video-slides").find(".soliloquy-delete-video-slide").each(function(){e(this).trigger("click")})}if(j){e("#soliloquy-html-slides").find(".soliloquy-delete-html-slide").each(function(){e(this).trigger("click")})}},500)},"json")});e(document).on("keyup.soliloquySearchLibrary keydown.soliloquySearchLibrary","#soliloquy-gallery-search",function(){var k=e(this);e(".soliloquy-waiting").remove();k.before('<span class="soliloquy-waiting" style="display: inline-block; margin-top: 16px; margin-right: 10px;"><img class="soliloquy-spinner" src="'+soliloquy.spinner+'" width="16px" height="16px" style="margin: -1px 5px 0; vertical-align: middle;" />'+soliloquy.searching+"</span>");var l=e(this).val();var j={action:"soliloquy_library_search",nonce:soliloquy.librarysearch,post_id:soliloquy.id,search:l};f(function(){e.post(soliloquy.ajaxurl,j,function(m){e(".soliloquy-load-library").addClass("has-search").attr("data-soliloquy-offset",parseInt(0));if(m){e(".soliloquy-gallery").html(m.html)}e(".soliloquy-waiting").fadeOut("normal",function(){e(this).remove()})},"json")},"500")});var g=e("#soliloquy-images");g.sortable({containment:"#soliloquy-area",update:function(k,l){e(".soliloquy-waiting").show();var j={url:soliloquy.ajaxurl,type:"post",async:true,cache:false,dataType:"json",data:{action:"soliloquy_sort_images",order:g.sortable("toArray").toString(),post_id:soliloquy.id,nonce:soliloquy.sortnonce},success:function(m){e(".soliloquy-waiting").hide();return},error:function(n,o,m){e(".soliloquy-waiting").hide();return}};e.ajax(j)}});function b(){var j={action:"soliloquy_refresh_images",id:soliloquy.id,nonce:soliloquy.nonce};e(".soliloquy-waiting").remove();e("#soliloquy-upload").after('<span class="soliloquy-waiting"><img class="soliloquy-spinner" src="'+soliloquy.spinner+'" width="16px" height="16px" style="margin: -1px 5px 0; vertical-align: middle;" />'+soliloquy.loading+"</span>");e.post(soliloquy.ajaxurl,j,function(k){e("#soliloquy-images").html(k.images);e(".soliloquy-image-meta").hide();e(".soliloquy-html").find(".soliloquy-html-code").each(function(l,m){var n=e(m).attr("id");a[n]=CodeMirror.fromTextArea(m,{enterMode:"keep",indentUnit:4,electricChars:false,lineNumbers:true,lineWrapping:true,matchBrackets:true,mode:"php",smartIndent:false,tabMode:"shift",theme:"eclipse"});a[n].on("blur",function(o){e("#"+n).text(o.getValue())});a[n].refresh()})},"json");e(".soliloquy-waiting").fadeOut("normal",function(){e(this).remove()})}var f=(function(){var j=0;return function(l,k){clearTimeout(j);j=setTimeout(l,k)}})();e(document).on("click.soliloquyInternalLinking","#soliloquy-link-existing",function(k){k.preventDefault();var j=e(this);e(this).toggleClass("needs-close");e(this).next().fadeToggle("normal",function(){if(j.hasClass("needs-close")){j.text(soliloquy.linkclose)}else{j.text(soliloquy.linkopen)}})});e(document).on("keyup.soliloquySearchLinks keydown.soliloquySearchLinks",".soliloquy-search",function(){var m=e(this).attr("id");var l=e(this).val();var k=e(this).next().find("ul").attr("id");var j={action:"soliloquy_link_search",id:soliloquy.id,nonce:soliloquy.linknonce,search:l};f(function(){i(m,k,j)},"500")});e(document).on("click.soliloquyInsertLink",".soliloquy-results-list li",function(){if(e(this).hasClass("soliloquy-no-results")){return}e(".soliloquy-results-list li").removeClass("selected");e(this).addClass("selected");var m=e(this).find("input").val();var j=e(this).find(".soliloquy-item-title").text();var k=e(this).parent().parent().parent().parent().parent().find(".soliloquy-link").attr("id");var l=e(this).parent().parent().parent().parent().parent().find(".soliloquy-link-title").attr("id");e("#"+k).val(m);e("#"+l).val(j)});function i(l,k,j){e("#"+l).after('<span class="soliloquy-waiting"><img class="soliloquy-spinner" src="'+soliloquy.spinner+'" width="16px" height="16px" style="margin: -1px 5px 0; vertical-align: middle;" />'+soliloquy.searching+"</span>");e.post(soliloquy.ajaxurl,j,function(n){e("#"+k).children().remove();if(!n.links){var m='<li class="soliloquy-no-results"><span>'+soliloquy.noresults+"</span></li>";e("#"+k).append(m)}e.each(n.links,function(q,p){var r=n.links[q];var s=(q%2==0)?"even":"odd";var o='<li id="link-id-'+r.ID+'" class="soliloquy-result '+s+'"><input type="hidden" class="soliloquy-item-permalink" value="'+r.permalink+'" /><span class="soliloquy-item-title">'+r.title+'</span><span class="soliloquy-item-info">'+r.info+"</span></li>";e("#"+k).append(o)});var m=""},"json");e(".soliloquy-waiting").fadeOut("normal",function(){e(this).remove()})}});