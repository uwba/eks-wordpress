if("undefined"==typeof soliloquyPreviewSettingsID||false==soliloquyPreviewSettingsID){soliloquyPreviewSettingsID=""}jQuery(document).ready(function(a){a("#soliloquy_preview_settings").on("click.soliloquyPreview","#soliloquy-preview",function(f){f.preventDefault();a(".soliloquy-waiting").remove();a("#soliloquy_preview_settings").css({height:a("#soliloquy_preview_settings").height()});a(this).after('<span class="soliloquy-waiting"><img class="soliloquy-spinner" src="'+soliloquy.spinner+'" width="16px" height="16px" style="margin: 0 5px; vertical-align: text-bottom;" />'+soliloquy_preview.process+"</span>");var d={action:"soliloquy_update_preview",id:soliloquy_preview.id,nonce:soliloquy_preview.nonce};var c={};soliloquyPreviewSettingsID+="#soliloquy-slider-type,#soliloquy_settings .form-table td,";a(soliloquyPreviewSettingsID.slice(0,-1)).each(function(){var e=a(this).find("*");a.each(e,function(){var g=a(this).attr("id");var h=a(this).val();if("checkbox"==a(this).attr("type")||"radio"==a(this).attr("type")){var h=a(this).is(":checked")?"true":"false"}d[g]=h})});a("#soliloquy-area .soliloquy-meta-table").each(function(e){c[e]=a(this).attr("id")});a.each(c,function(h,j){var g=j;var e=j.split("-");e=e[3];d["soliloquymeta-"+e]={};a("#"+g+" td").each(function(){var i=a(this).find("*");a.each(i,function(){var k=a(this).attr("class");var l=a(this).val();if("checkbox"==a(this).attr("type")){var l=a(this).is(":checked")?"true":"false"}d["soliloquymeta-"+e][k]=l})})});var b={url:soliloquy.ajaxurl,type:"post",async:true,cache:false,data:d,dataType:"json",success:function(e){a(".soliloquy-waiting").html('<img class="soliloquy-spinner" src="'+soliloquy.spinner+'" width="16px" height="16px" style="margin: 0 5px; vertical-align: text-bottom;" />'+soliloquy_preview.generate);if(typeof e.error!=="undefined"){a(".soliloquy-waiting").html('<span style="font-weight: bold; margin-left: 10px;">'+e.error+"</span>");a("#soliloquy-preview-wrap").slideUp("slow",function(){a(this).html("")});a("#soliloquy_preview_settings").css({height:"auto"});setTimeout(function(){a(".soliloquy-waiting").fadeOut()},3000);return}if(typeof e.pre!=="undefined"){a(".soliloquy-waiting").html('<span style="font-weight: bold; margin-left: 10px;">'+soliloquy_preview.success+"</span>");a("#soliloquy-preview-wrap").show();a("#soliloquy-preview-wrap").html(e.pre);a("#soliloquy_preview_settings").css({height:"auto"});setTimeout(function(){a(".soliloquy-waiting").fadeOut()},3000);return}if(!a.isEmptyObject(e.scripts)){a.each(e.scripts,function(h,g){a.ajax({url:g,dataType:"script",cache:false,success:function(){if(h==(e.scripts.length-1)){if(0!==e.extra.length){e.slider+=e.extra}a("#soliloquy-preview-wrap").show();a("#soliloquy-preview-wrap").html(e.slider);a(".soliloquy-waiting").html('<span style="font-weight: bold; margin-left: 10px;">'+soliloquy_preview.success+"</span>");a("#soliloquy_preview_settings").css({height:"auto"});setTimeout(function(){a(".soliloquy-waiting").fadeOut()},3000)}}})})}else{if(0!==e.extra.length){e.slider+=e.extra}a("#soliloquy-preview-wrap").show();a("#soliloquy-preview-wrap").html(e.slider);a(".soliloquy-waiting").html('<span style="font-weight: bold; margin-left: 10px;">'+soliloquy_preview.success+"</span>");a("#soliloquy_preview_settings").css({height:"auto"});setTimeout(function(){a(".soliloquy-waiting").fadeOut()},3000)}},error:function(h,i,g){a(".soliloquy-waiting").html('<span style="font-weight: bold; margin-left: 10px;">'+soliloquy_preview.error+"</span>");a("#soliloquy_preview_settings").css({height:"auto"});setTimeout(function(){a(".soliloquy-waiting").fadeOut()},3000);return}};a.ajax(b)})});